use perq::{oeis, ModIntP32, Series, ShortSeq};
use std::io::BufRead;

/*
    0,
    1,
    4,
    25,
    200,
    1841,
    18484,
    196721,
    2181824,
    24946441,
    291946164,
    3479811705,
    42095551880,
    515486335801,
    6377434250404,
    79590655958225,
    1000789970001600,
    12666830617194345,
    161247641547268420,
    2063167444559514225,
    26518733824640137800,
    342252373220448627041,
    4433464024929955656724,
    57622831671531485812945,
    751228514772503879320640,
    9821172353481527796542481,
    128727056478679431840606324,
    1691237391925836656406580081,
    22268467717096468330272190024,
    293804413993737537728793932041,
    3883711144261115005245532384644,
    51428137051608425785226046865041,
    682134469690571728659674010234624,
    9061692762525587330169925671665961,
    120552927767593239269841986039686244,
    1605971746844739630584980152877593761,
    21421782448657908114365557640004884744,
    286087974816671075056858290188745957801,
    3825085854591304012191690280003474168404,
    51198110606172627006968855635879093537801,
    685983188940181222889528002558335237771584,
    9200200157101761957865906752154393495260281,
    123504982556747128327229031236633108179062964,
    1659417704433339096252428957765864043147713481,
    22314799934130206900710676464316003054152160904,
    300316746215240579756682127530116927426132004281,
    4044825027542358812959122682341680381504501486564,
    54517879626054139960813043154785076400393639795121,
    735332108882934649034569742186530081515896531108544,
    9924774568401253795518248700920213444177273963356401,
    134041197290962452445332660054778002458897243175650724,
    1811445108728748707919980707458329320453579092462275865,
    24494617691373997227500972524095815310332761338511256200,
    331409345588975203140051138136706822469780319939364188921,
    4486400054053400785634090732983631220477415669411530438964,
    60766118016050882382042578177127319189957342130202603647305,
    823468168699522789238888574388318733672632978391963341958080,
    11164672785957531533585163588258935117378233710669318909686625,
    151443799261782935576922739396656920757322170583801452580509300,
    2055209757985157762902397231047141077803858777861714027788395105,
    27903146715617324400080621865774317429425108595339668296778583880,
    378997318967276615835240535479281219955918032964771465003412321001,
    5149901124304162432369464360395045592148340767151974875554873410244,
    70006056181354015196944955961579395707354639048045141294855899243665,
    952008335710724519831950463608118179415959515238232368967879069683200,
    12951170423874492792315369615601047403483086447871159692416735656748841,
    176252534175793552848260822190259733493304204239618865858660903423395364,
    2399468168317142880377772475917196407070225051456324835618660067211673921,
    32677083659016663722841623934735833510633690870239535794949742196298006024,
    445159727831972776493048416414868996553323978715792017711220281577871099321,
*/

fn main() {
    let db = oeis::SeqDB::from_stripped("stripped".to_string()).unwrap();
    println!("READY");
    let stdin = std::io::stdin();
    for l in stdin.lock().lines() {
        let line = l.unwrap();
        let short: ShortSeq<ModIntP32> = line.parse().unwrap();
        let long: Series = line.parse().unwrap();
        db.match_seq(short, &long);
    }
}
